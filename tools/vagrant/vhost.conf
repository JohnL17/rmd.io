WSGIPythonPath  /vagrant/app

# redirect everything form http:// to https://
<VirtualHost *:80>
   ServerAdmin webmaster@localhost
   RewriteEngine On
   RewriteCond %{SERVER_PORT} 80
   RewriteRule ^(.*)$ https://maildelay.vm [R,L]
   CustomLog ${APACHE_LOG_DIR}/access.log combinedd
</VirtualHost>

<VirtualHost *:443>
    ServerAdmin webmaster@localhost
    ServerName maildelay.vm

    WSGIScriptAlias /         /vagrant/app/maildelay/wsgi.py
    Alias           /static/  /vagrant/app/static/

    # document root should not be app dir, for security reasons
    DocumentRoot /vagrant/app/static/

    <Directory /vagrant>
        Options -Indexes -FollowSymLinks -MultiViews
        AllowOverride All
        Order allow,deny
        allow from all
    </Directory>

    ErrorLog /var/log/apache2/error.log

    # Possible values include: debug, info, notice, warn, error, crit,
    # alert, emerg.
    LogLevel notice

    CustomLog /var/log/apache2/access.log combined

    SSLEngine on
    SSLCertificateFile    /etc/ssl/certs/ssl-cert-snakeoil.pem
    SSLCertificateKeyFile /etc/ssl/private/ssl-cert-snakeoil.key
</VirtualHost>
